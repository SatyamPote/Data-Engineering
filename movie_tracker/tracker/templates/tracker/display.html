<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie/Series Search</title>
    <style>
        /* Styles for Search Bar */
        .grid {
            height: 800px;
            width: 800px;
            background-image: linear-gradient(to right, #0f0f10 1px, transparent 1px), linear-gradient(to bottom, #0f0f10 1px, transparent 1px);
            background-size: 1rem 1rem;
            background-position: center center;
            position: absolute;
            z-index: -1;
            filter: blur(1px);
        }

        .body {
            background-image: url("https://www.notebookcheck.net/fileadmin/Notebooks/News/_nc3/netflixteaser.png");
            background-size: cover;
            background-repeat: no-repeat;
            background-attachment: fixed;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            color: white;
            font-family: Arial, sans-serif;
            padding: 20px;
            text-align: center;
        }

        /* Data background style  */
        .data-background {
            background-color: rgba(0, 0, 0, 0.6);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        /* Content Container for better readability */
        .content-container {
            width: 80%;
            max-width: 1200px;
            margin-top: 20px;
            box-sizing: border-box;
            padding: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Ensure .content-container and other content doesn't overflow */
        .content-container,
        .images-container,
        #poda {
            width: 100%;
            max-width: 1200px;
            box-sizing: border-box;
        }

        /* Ensure all content is within the screen */
        * {
            box-sizing: border-box;
        }

        /* Set up grid */
        .grid {
            height: 800px;
            width: 800px;
            background-image: linear-gradient(to right, #0f0f10 1px, transparent 1px), linear-gradient(to bottom, #0f0f10 1px, transparent 1px);
            background-size: 1rem 1rem;
            background-position: center center;
            position: absolute;
            z-index: -1;
            filter: blur(1px);
        }

        /* Search bar styles */
        #poda {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            width: 100%;
        }

        .white,
        .border,
        .darkBorderBg,
        .glow {
            max-height: 70px;
            max-width: 314px;
            height: 100%;
            width: 100%;
            position: absolute;
            overflow: hidden;
            z-index: -1;
            border-radius: 12px;
            filter: blur(3px);
        }

        .input {
            background-color: #010201;
            border: none;
            width: 301px;
            height: 56px;
            border-radius: 10px;
            color: white;
            padding-inline: 59px;
            font-size: 18px;
            white-space: nowrap; /* Prevent wrapping */
        }

        .input::placeholder {
            color: #c0b9c0;
        }

        .input:focus {
            outline: none;
        }

        #main:focus-within>#input-mask {
            display: none;
        }

        #input-mask {
            pointer-events: none;
            width: 100px;
            height: 20px;
            position: absolute;
            background: linear-gradient(90deg, transparent, black);
            top: 18px;
            left: 70px;
        }

        #pink-mask {
            pointer-events: none;
            width: 30px;
            height: 20px;
            position: absolute;
            background: #cf30aa;
            top: 10px;
            left: 5px;
            filter: blur(20px);
            opacity: 0.8;
            transition: all 2s;
        }

        #main:hover>#pink-mask {
            opacity: 0;
        }

        .white {
            max-height: 63px;
            max-width: 307px;
            border-radius: 10px;
            filter: blur(2px);
        }

        .white::before {
            content: "";
            z-index: -2;
            text-align: center;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(83deg);
            position: absolute;
            width: 600px;
            height: 600px;
            background-repeat: no-repeat;
            background-position: 0 0;
            filter: brightness(1.4);
            background-image: conic-gradient(rgba(0, 0, 0, 0) 0%, #a099d8, rgba(0, 0, 0, 0) 8%, rgba(0, 0, 0, 0) 50%, #dfa2da, rgba(0, 0, 0, 0) 58%);
            transition: all 2s;
        }

        .border {
            max-height: 59px;
            max-width: 303px;
            border-radius: 11px;
            filter: blur(0.5px);
        }

        .border::before {
            content: "";
            z-index: -2;
            text-align: center;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(70deg);
            position: absolute;
            width: 600px;
            height: 600px;
            filter: brightness(1.3);
            background-repeat: no-repeat;
            background-position: 0 0;
            background-image: conic-gradient(#1c191c, #402fb5 5%, #1c191c 14%, #1c191c 50%, #cf30aa 60%, #1c191c 64%);
            transition: all 2s;
        }

        .darkBorderBg {
            max-height: 65px;
            max-width: 312px;
        }

        .darkBorderBg::before {
            content: "";
            z-index: -2;
            text-align: center;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(82deg);
            position: absolute;
            width: 600px;
            height: 600px;
            background-repeat: no-repeat;
            background-position: 0 0;
            background-image: conic-gradient(rgba(0, 0, 0, 0), #18116a, rgba(0, 0, 0, 0) 10%, rgba(0, 0, 0, 0) 50%, #6e1b60, rgba(0, 0, 0, 0) 60%);
            transition: all 2s;
        }

        #poda:hover>.darkBorderBg::before {
            transform: translate(-50%, -50%) rotate(262deg);
        }

        #poda:hover>.glow::before {
            transform: translate(-50%, -50%) rotate(240deg);
        }

        #poda:hover>.white::before {
            transform: translate(-50%, -50%) rotate(263deg);
        }

        #poda:hover>.border::before {
            transform: translate(-50%, -50%) rotate(250deg);
        }

        #poda:hover>.darkBorderBg::before {
            transform: translate(-50%, -50%) rotate(-98deg);
        }

        #poda:hover>.glow::before {
            transform: translate(-50%, -50%) rotate(-120deg);
        }

        #poda:hover>.white::before {
            transform: translate(-50%, -50%) rotate(-97deg);
        }

        #poda:hover>.border::before {
            transform: translate(-50%, -50%) rotate(-110deg);
        }

        #poda:focus-within>.darkBorderBg::before {
            transform: translate(-50%, -50%) rotate(442deg);
            transition: all 4s;
        }

        #poda:focus-within>.glow::before {
            transform: translate(-50%, -50%) rotate(420deg);
            transition: all 4s;
        }

        #poda:focus-within>.white::before {
            transform: translate(-50%, -50%) rotate(443deg);
            transition: all 4s;
        }

        #poda:focus-within>.border::before {
            transform: translate(-50%, -50%) rotate(430deg);
            transition: all 4s;
        }

        .glow {
            overflow: hidden;
            filter: blur(30px);
            opacity: 0.4;
            max-height: 130px;
            max-width: 354px;
        }

        .glow:before {
            content: "";
            z-index: -2;
            text-align: center;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(60deg);
            position: absolute;
            width: 999px;
            height: 999px;
            background-repeat: no-repeat;
            background-position: 0 0;
            background-image: conic-gradient(#000, #402fb5 5%, #000 38%, #000 50%, #cf30aa 60%, #000 87%);
            transition: all 2s;
        }

        @keyframes rotate {
            100% {
                transform: translate(-50%, -50%) rotate(450deg);
            }
        }

        @keyframes leftright {
            0% {
                transform: translate(0px, 0px);
                opacity: 1;
            }

            49% {
                transform: translate(250px, 0px);
                opacity: 0;
            }

            80% {
                transform: translate(-40px, 0px);
                opacity: 0;
            }

            100% {
                transform: translate(0px, 0px);
                opacity: 1;
            }
        }

        #filter-icon {
            position: absolute;
            top: 8px;
            right: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2;
            max-height: 40px;
            max-width: 38px;
            height: 100%;
            width: 100%;
            isolation: isolate;
            overflow: hidden;
            border-radius: 10px;
            background: linear-gradient(180deg, #161329, black, #1d1b4b);
            border: 1px solid transparent;
        }

        .filterBorder {
            height: 42px;
            width: 40px;
            position: absolute;
            overflow: hidden;
            top: 7px;
            right: 7px;
            border-radius: 10px;
        }

        .filterBorder::before {
            content: "";
            text-align: center;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(90deg);
            position: absolute;
            width: 600px;
            height: 600px;
            background-repeat: no-repeat;
            background-position: 0 0;
            filter: brightness(1.35);
            background-image: conic-gradient(rgba(0, 0, 0, 0), #3d3a4f, rgba(0, 0, 0, 0) 50%, rgba(0, 0, 0, 0) 50%, #3d3a4f, rgba(0, 0, 0, 0) 100%);
            animation: rotate 4s linear infinite;
        }

        #main {
            position: relative;
        }

        #search-icon {
            position: absolute;
            left: 20px;
            top: 15px;
        }

        /* Download Button Styles */
        .uiverse {
            --duration: 7s;
            --easing: linear;
            --c-color-1: rgba(255, 163, 26, 0.7);
            --c-color-2: #1a23ff;
            --c-color-3: #e21bda;
            --c-color-4: rgba(255, 232, 26, 0.7);
            --c-shadow: rgba(255, 223, 87, 0.5);
            --c-shadow-inset-top: rgba(255, 223, 52, 0.9);
            --c-shadow-inset-bottom: rgba(255, 250, 215, 0.8);
            --c-radial-inner: #ffd215;
            --c-radial-outer: #fff172;
            --c-color: #fff;
            -webkit-tap-highlight-color: transparent;
            -webkit-appearance: none;
            outline: none;
            position: relative;
            cursor: pointer;
            border: none;
            display: table;
            border-radius: 24px;
            padding: 0;
            margin: 0;
            text-align: center;
            font-weight: 600;
            font-size: 16px;
            letter-spacing: 0.02em;
            line-height: 1.5;
            color: var(--c-color);
            background: radial-gradient(circle, var(--c-radial-inner), var(--c-radial-outer) 80%);
            box-shadow: 0 0 14px var(--c-shadow);
            margin-top: 10px;
        }

        .uiverse:before {
            content: "";
            pointer-events: none;
            position: absolute;
            z-index: 3;
            left: 0;
            top: 0;
            right: 0;
            bottom: 0;
            border-radius: 24px;
            box-shadow: inset 0 3px 12px var(--c-shadow-inset-top), inset 0 -3px 4px var(--c-shadow-inset-bottom);
        }

        .uiverse .wrapper {
            -webkit-mask-image: -webkit-radial-gradient(white, black);
            overflow: hidden;
            border-radius: 24px;
            min-width: 132px;
            padding: 12px 0;
        }

        .uiverse .wrapper span {
            display: inline-block;
            position: relative;
            z-index: 1;
        }

        .uiverse:hover {
            --duration: 1400ms;
        }

        .uiverse .wrapper .circle {
            position: absolute;
            left: 0;
            top: 0;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            filter: blur(var(--blur, 8px));
            background: var(--background, transparent);
            transform: translate(var(--x, 0), var(--y, 0)) translateZ(0);
            animation: var(--animation, none) var(--duration) var(--easing) infinite;
        }

        .uiverse .wrapper .circle.circle-1,
        .uiverse .wrapper .circle.circle-9,
        .uiverse .wrapper .circle.circle-10 {
            --background: var(--c-color-4);
        }

        .uiverse .wrapper .circle.circle-3,
        .uiverse .wrapper .circle.circle-4 {
            --background: var(--c-color-2);
            --blur: 14px;
        }

        .uiverse .wrapper .circle.circle-5,
        .uiverse .wrapper .circle.circle-6 {
            --background: var(--c-color-3);
            --blur: 16px;
        }

        .uiverse .wrapper .circle.circle-2,
        .uiverse .wrapper .circle.circle-7,
        .uiverse .wrapper .circle.circle-8,
        .uiverse .wrapper .circle.circle-11,
        .uiverse .wrapper .circle.circle-12 {
            --background: var(--c-color-1);
            --blur: 12px;
        }

        .uiverse .wrapper .circle.circle-1 {
            --x: 0;
            --y: -40px;
            --animation: circle-1;
        }

        .uiverse .wrapper .circle.circle-2 {
            --x: 92px;
            --y: 8px;
            --animation: circle-2;
        }

        .uiverse .wrapper .circle.circle-3 {
            --x: -12px;
            --y: -12px;
            --animation: circle-3;
        }

        .uiverse .wrapper .circle.circle-4 {
            --x: 80px;
            --y: -12px;
            --animation: circle-4;
        }

        .uiverse .wrapper .circle.circle-5 {
            --x: 12px;
            --y: -4px;
            --animation: circle-5;
        }

        .uiverse .wrapper .circle.circle-6 {
            --x: 56px;
            --y: 16px;
            --animation: circle-6;
        }

        .uiverse .wrapper .circle.circle-7 {
            --x: 8px;
            --y: 28px;
            --animation: circle-7;
        }

        .uiverse .wrapper .circle.circle-8 {
            --x: 28px;
            --y: -4px;
            --animation: circle-8;
        }

        /* Image display styles */
        .images-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 20px;
        }

        .images-container img {
            width: 150px;
            height: auto;
            margin: 5px;
            border: 1px solid #ddd;
            border-radius: 5px;
            object-fit: cover;
        }

        /* Responsiveness */
        @media (max-width: 768px) {
            .content-container {
                width: 95%;
            }

            .input {
                width: 90%;
            }

            .images-container img {
                width: 120px;
                margin: 3px;
            }
        }

        @keyframes circle-9 {
            33% {
                transform: translate(20px, -12px) translateZ(0);
            }

            66% {
                transform: translate(80px, -8px) translateZ(0);
            }
        }

        @keyframes circle-10 {
            33% {
                transform: translate(68px, 20px) translateZ(0);
            }

            66% {
                transform: translate(100px, 28px) translateZ(0);
            }
        }

        @keyframes circle-11 {
            33% {
                transform: translate(4px, 4px) translateZ(0);
            }

            66% {
                transform: translate(68px, 20px) translateZ(0);
            }
        }

        @keyframes circle-12 {
            33% {
                transform: translate(56px, 0px) translateZ(0);
            }

            66% {
                transform: translate(60px, -32px) translateZ(0);
            }
        }
        /* Form styles for a cohesive look */

        form {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .download-button {
            margin-top: 20px;
        }

        form button[type="submit"] {
            padding: 10px 20px;
            background-color: #6441a5;
            /* Neon Purple */
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease;
            /* Smooth transition for hover */
        }

        form button[type="submit"]:hover {
            background-color: #4a307c;
            /* Darker purple on hover */
        }
    </style>
</head>

<body class="body">
    <div class="grid"></div>
    <div class="content-container">
        <!-- Centered Container for content -->
        <div id="poda">
            <div class="glow"></div>
            <div class="darkBorderBg"></div>
            <div class="darkBorderBg"></div>
            <div class="darkBorderBg"></div>

            <div class="white"></div>

            <div class="border"></div>

            <div id="main">
                <form method="post">
                    {% csrf_token %}
                    <div id="search-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" viewBox="0 0 24 24" stroke-width="2" stroke-linejoin="round" stroke-linecap="round" height="24" fill="none" class="feather feather-search">
                            <circle stroke="url(#search)" r="8" cy="11" cx="11"></circle>
                            <line stroke="url(#searchl)" y2="16.65" y1="22" x2="16.65" x1="22"></line>
                            <defs>
                                <linearGradient gradientTransform="rotate(50)" id="search">
                                    <stop stop-color="#f8e7f8" offset="0%"></stop>
                                    <stop stop-color="#b6a9b7" offset="50%"></stop>
                                </linearGradient>
                                <linearGradient id="searchl">
                                    <stop stop-color="#b6a9b7" offset="0%"></stop>
                                    <stop stop-color="#837484" offset="50%"></stop>
                                </linearGradient>
                            </defs>
                        </svg>
                    </div>
                    <input type="text" name="{{ form.search_term.name }}" id="{{ form.search_term.id_for_label }}" class="input" placeholder="{{ form.search_term.label }}" value="{% if search_term %}{{ search_term }}{% endif %}" onkeydown="if (event.keyCode == 13) { this.form.submit(); return false; }">
                    <div id="input-mask"></div>
                    <div id="pink-mask"></div>
                    <div class="filterBorder"></div>
                    <div id="filter-icon">
                        <svg preserveAspectRatio="none" height="27" width="27" viewBox="4.8 4.56 14.832 15.408" fill="none">
                            <path d="M8.16 6.65002H15.83C16.47 6.65002 16.99 7.17002 16.99 7.81002V9.09002C16.99 9.56002 16.7 10.14 16.41 10.43L13.91 12.64C13.56 12.93 13.33 13.51 13.33 13.98V16.48C13.33 16.83 13.1 17.29 12.81 17.47L12 17.98C11.24 18.45 10.2 17.92 10.2 16.99V13.91C10.2 13.5 9.97 12.98 9.73 12.69L7.52 10.36C7.23 10.08 7 9.55002 7 9.20002V7.87002C7 7.17002 7.52 6.65002 8.16 6.65002Z" stroke="#d6d6e6" stroke-width="1" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path>
                        </svg>
                    </div>
                    <button type="submit" style="display:none;">Search</button>
                    <!-- Add a button, make it invisible to capture the form-->
                </form>
            </div>
        </div>
        <!-- Movie Details -->
        {% if movie %}
        <div class="data-background">
            <h2>Movie Details:</h2>
            <p>Title: {{ movie.title }}</p>
            <p>Genre: {{ movie.genre }}</p>
            <p>Language: {{ movie.language }}</p>
            <p>Rating: {{ movie.rating }}</p>
            <p>Release Date: {{ movie.release_date }}</p>
            <p>Overview: {{ movie.overview }}</p>
        </div>

        <!-- Movie Images -->
        {% if movie.image_url %}
        <h3>Movie Images:</h3>
        <div class="images-container">
            <!-- flex container with wrapping enabled -->
            {% for image in movie.image_url %}
            <img src="{{ image }}" alt="Movie Poster">
            {% endfor %}
        </div>
        {% endif %}

        {% if movie.trailer_id %}
        <br>
        <iframe width="560" height="315" src="https://www.youtube.com/embed/{{ movie.trailer_id }}" frameborder="0" allowfullscreen></iframe>
        {% endif %}

        <!-- Export to CSV Form -->
        <form method="post" action="{% url 'export_movie_csv' %}" class="download-button">
            {% csrf_token %}
            <input type="hidden" name="search_term" value="{{ search_term }}">
            <!-- Use stored search_term  value-->
            <input type="hidden" name="is_series" value="False">
            <button type="submit" class="uiverse">
                <div class="wrapper">
                    <span>Export Movie to CSV</span>
                    <div class="circle circle-12"></div>
                    <div class="circle circle-11"></div>
                    <div class="circle circle-10"></div>
                    <div class="circle circle-9"></div>
                    <div class="circle circle-8"></div>
                    <div class="circle circle-7"></div>
                    <div class="circle circle-6"></div>
                    <div class="circle circle-5"></div>
                    <div class="circle circle-4"></div>
                    <div class="circle circle-3"></div>
                    <div class="circle circle-2"></div>
                    <div class="circle circle-1"></div>
                </div>
            </button>
        </form>

        <!-- Series Details -->
        {% elif series %}
        <div class="data-background">
            <h2>Series Details:</h2>
            <p>Title: {{ series.title }}</p>
            <p>Genre: {{ series.genre }}</p>
            <p>Language: {{ series.language }}</p>
            <p>Overview: {{ series.overview }}</p>
        </div>

        <!-- Tv Show images  -->
        {% if series.image_url %}
        <h3>TV Show Images:</h3>
        <div class="images-container">
            <!-- container of the images -->
            {% for image in series.image_url %}
            <img src="{{ image }}" alt="TV Show Poster">
            {% endfor %}
        </div>
        {% endif %}

        {% if series.trailer_id %}
        <br>
        <iframe width="560" height="315" src="https://www.youtube.com/embed/{{ series.trailer_id }}" frameborder="0" allowfullscreen></iframe>
        {% endif %}

        {% if series.seasons %}
        <h3>Seasons and Episodes:</h3>
        {% for season in series.seasons %}
        <div class="data-background">
            <h4>Season {{ season.season_number }}</h4>
            {% if season.episodes %}
            <ul>
                {% for episode in season.episodes %}
                <li>Episode {{ episode.episode_number }}: {{ episode.episode_name }} (Rating: {{episode.episode_rating }})</li>
                {% endfor %}
            </ul>
            {% endif %}
        </div>
        {% endfor %}
        {% endif %}

        <!-- Export to CSV Form -->
        <form method="post" action="{% url 'export_movie_csv' %}" class="download-button">
            {% csrf_token %}
            <input type="hidden" name="search_term" value="{{ search_term }}">
            <!-- search_term use store  value-->
            <input type="hidden" name="is_series" value="True">
            <button type="submit" class="uiverse">
                <div class="wrapper">
                    <span>Export Series to CSV</span>
                    <div class="circle circle-12"></div>
                    <div class="circle circle-11"></div>
                    <div class="circle circle-10"></div>
                    <div class="circle circle-9"></div>
                    <div class="circle circle-8"></div>
                    <div class="circle circle-7"></div>
                    <div class="circle circle-6"></div>
                    <div class="circle circle-5"></div>
                    <div class="circle circle-4"></div>
                    <div class="circle circle-3"></div>
                    <div class="circle circle-2"></div>
                    <div class="circle circle-1"></div>
                </div>
            </button>
        </form>

        <!-- Display Error Message -->
        {% elif error %}
        <p style="color: red;">{{ error }}</p>
        {% endif %}
    </div>
    <!-- End content container -->
</body>

</html> 